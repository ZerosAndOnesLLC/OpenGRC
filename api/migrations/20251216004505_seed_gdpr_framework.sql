-- GDPR - General Data Protection Regulation (EU) 2016/679
-- Effective May 25, 2018

-- Insert GDPR Framework
INSERT INTO frameworks (id, name, version, description, category, is_system, created_at)
VALUES (
    'e0000000-0000-0000-0000-000000000001',
    'GDPR',
    '2016/679',
    'The General Data Protection Regulation (GDPR) is the EU''s data protection and privacy regulation. It addresses the transfer of personal data outside the EU and EEA and applies to all organizations processing EU residents'' personal data.',
    'privacy',
    true,
    NOW()
);

-- ===========================================
-- CHAPTER II - PRINCIPLES (Articles 5-11)
-- ===========================================

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e1000000-0000-0000-0000-000000000001', 'e0000000-0000-0000-0000-000000000001', 'CH-II', 'Principles', 'Principles relating to processing of personal data.', 'Principles', NULL, 1);

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e1000000-0000-0000-0001-000000000001', 'e0000000-0000-0000-0000-000000000001', 'Art.5', 'Principles relating to processing of personal data', 'Personal data shall be processed lawfully, fairly, transparently; collected for specified purposes; adequate, relevant and limited; accurate; kept no longer than necessary; and processed securely.', 'Principles', 'e1000000-0000-0000-0000-000000000001', 1),
('e1000000-0000-0000-0001-000000000002', 'e0000000-0000-0000-0000-000000000001', 'Art.6', 'Lawfulness of processing', 'Processing is lawful only if and to the extent that at least one of the following applies: consent, contract, legal obligation, vital interests, public task, or legitimate interests.', 'Principles', 'e1000000-0000-0000-0000-000000000001', 2),
('e1000000-0000-0000-0001-000000000003', 'e0000000-0000-0000-0000-000000000001', 'Art.7', 'Conditions for consent', 'Where processing is based on consent, the controller shall be able to demonstrate that the data subject has consented. Consent must be freely given, specific, informed, and unambiguous.', 'Principles', 'e1000000-0000-0000-0000-000000000001', 3),
('e1000000-0000-0000-0001-000000000004', 'e0000000-0000-0000-0000-000000000001', 'Art.8', 'Conditions applicable to child''s consent', 'In relation to information society services offered directly to a child, processing is lawful where the child is at least 16 years old, or consent is given by the holder of parental responsibility.', 'Principles', 'e1000000-0000-0000-0000-000000000001', 4),
('e1000000-0000-0000-0001-000000000005', 'e0000000-0000-0000-0000-000000000001', 'Art.9', 'Processing of special categories of personal data', 'Processing of personal data revealing racial or ethnic origin, political opinions, religious beliefs, trade union membership, genetic data, biometric data, health data, or sex life is prohibited, except under specified conditions.', 'Principles', 'e1000000-0000-0000-0000-000000000001', 5),
('e1000000-0000-0000-0001-000000000006', 'e0000000-0000-0000-0000-000000000001', 'Art.10', 'Processing of personal data relating to criminal convictions', 'Processing of personal data relating to criminal convictions and offences shall be carried out only under the control of official authority or when authorized by Union or Member State law.', 'Principles', 'e1000000-0000-0000-0000-000000000001', 6),
('e1000000-0000-0000-0001-000000000007', 'e0000000-0000-0000-0000-000000000001', 'Art.11', 'Processing which does not require identification', 'If purposes for processing do not require identification of a data subject, controller shall not be obliged to maintain additional information solely for the purpose of complying with this Regulation.', 'Principles', 'e1000000-0000-0000-0000-000000000001', 7);

-- ===========================================
-- CHAPTER III - RIGHTS OF THE DATA SUBJECT (Articles 12-23)
-- ===========================================

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e2000000-0000-0000-0000-000000000001', 'e0000000-0000-0000-0000-000000000001', 'CH-III', 'Rights of the Data Subject', 'Rights granted to individuals regarding their personal data.', 'Data Subject Rights', NULL, 2);

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e2000000-0000-0000-0001-000000000001', 'e0000000-0000-0000-0000-000000000001', 'Art.12', 'Transparent information, communication and modalities', 'The controller shall take appropriate measures to provide information and facilitate exercise of data subject rights in a concise, transparent, intelligible, and easily accessible form.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 1),
('e2000000-0000-0000-0001-000000000002', 'e0000000-0000-0000-0000-000000000001', 'Art.13', 'Information to be provided where personal data are collected from the data subject', 'Where personal data are collected from the data subject, the controller shall provide identity, purposes, recipients, retention period, rights, and other specified information at the time of collection.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 2),
('e2000000-0000-0000-0001-000000000003', 'e0000000-0000-0000-0000-000000000001', 'Art.14', 'Information to be provided where personal data have not been obtained from the data subject', 'Where personal data have not been obtained from the data subject, the controller shall provide the specified information within a reasonable period, at the latest within one month.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 3),
('e2000000-0000-0000-0001-000000000004', 'e0000000-0000-0000-0000-000000000001', 'Art.15', 'Right of access by the data subject', 'The data subject shall have the right to obtain from the controller confirmation as to whether personal data are being processed, and access to the data and specified information.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 4),
('e2000000-0000-0000-0001-000000000005', 'e0000000-0000-0000-0000-000000000001', 'Art.16', 'Right to rectification', 'The data subject shall have the right to obtain from the controller without undue delay the rectification of inaccurate personal data concerning him or her.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 5),
('e2000000-0000-0000-0001-000000000006', 'e0000000-0000-0000-0000-000000000001', 'Art.17', 'Right to erasure (right to be forgotten)', 'The data subject shall have the right to obtain from the controller the erasure of personal data without undue delay where one of specified grounds applies.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 6),
('e2000000-0000-0000-0001-000000000007', 'e0000000-0000-0000-0000-000000000001', 'Art.18', 'Right to restriction of processing', 'The data subject shall have the right to obtain from the controller restriction of processing in certain circumstances.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 7),
('e2000000-0000-0000-0001-000000000008', 'e0000000-0000-0000-0000-000000000001', 'Art.19', 'Notification obligation regarding rectification or erasure', 'The controller shall communicate any rectification or erasure of personal data or restriction of processing to each recipient to whom the personal data have been disclosed.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 8),
('e2000000-0000-0000-0001-000000000009', 'e0000000-0000-0000-0000-000000000001', 'Art.20', 'Right to data portability', 'The data subject shall have the right to receive the personal data in a structured, commonly used and machine-readable format and have the right to transmit those data to another controller.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 9),
('e2000000-0000-0000-0001-000000000010', 'e0000000-0000-0000-0000-000000000001', 'Art.21', 'Right to object', 'The data subject shall have the right to object, on grounds relating to his or her particular situation, to processing of personal data based on legitimate interests or public task.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 10),
('e2000000-0000-0000-0001-000000000011', 'e0000000-0000-0000-0000-000000000001', 'Art.22', 'Automated individual decision-making, including profiling', 'The data subject shall have the right not to be subject to a decision based solely on automated processing, including profiling, which produces legal effects or similarly significantly affects them.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 11),
('e2000000-0000-0000-0001-000000000012', 'e0000000-0000-0000-0000-000000000001', 'Art.23', 'Restrictions', 'Union or Member State law may restrict certain obligations and rights when necessary to safeguard national security, defence, public security, and other important objectives.', 'Data Subject Rights', 'e2000000-0000-0000-0000-000000000001', 12);

-- ===========================================
-- CHAPTER IV - CONTROLLER AND PROCESSOR (Articles 24-43)
-- ===========================================

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e3000000-0000-0000-0000-000000000001', 'e0000000-0000-0000-0000-000000000001', 'CH-IV', 'Controller and Processor', 'Obligations of data controllers and processors.', 'Controller and Processor', NULL, 3);

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e3000000-0000-0000-0001-000000000001', 'e0000000-0000-0000-0000-000000000001', 'Art.24', 'Responsibility of the controller', 'The controller shall implement appropriate technical and organisational measures to ensure and demonstrate that processing is performed in accordance with this Regulation.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 1),
('e3000000-0000-0000-0001-000000000002', 'e0000000-0000-0000-0000-000000000001', 'Art.25', 'Data protection by design and by default', 'The controller shall implement appropriate measures designed to implement data-protection principles in an effective manner and integrate necessary safeguards into processing.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 2),
('e3000000-0000-0000-0001-000000000003', 'e0000000-0000-0000-0000-000000000001', 'Art.26', 'Joint controllers', 'Where two or more controllers jointly determine the purposes and means of processing, they shall be joint controllers and shall determine their respective responsibilities.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 3),
('e3000000-0000-0000-0001-000000000004', 'e0000000-0000-0000-0000-000000000001', 'Art.27', 'Representatives of controllers or processors not established in the Union', 'Controllers or processors not established in the Union shall designate a representative in the Union where GDPR applies to their processing activities.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 4),
('e3000000-0000-0000-0001-000000000005', 'e0000000-0000-0000-0000-000000000001', 'Art.28', 'Processor', 'Processing by a processor shall be governed by a contract or legal act that is binding on the processor with respect to the controller, setting out specified requirements.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 5),
('e3000000-0000-0000-0001-000000000006', 'e0000000-0000-0000-0000-000000000001', 'Art.29', 'Processing under the authority of the controller or processor', 'The processor and any person acting under the authority of the controller or processor shall not process personal data except on instructions from the controller.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 6),
('e3000000-0000-0000-0001-000000000007', 'e0000000-0000-0000-0000-000000000001', 'Art.30', 'Records of processing activities', 'Each controller and processor shall maintain a record of processing activities under its responsibility containing specified information.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 7),
('e3000000-0000-0000-0001-000000000008', 'e0000000-0000-0000-0000-000000000001', 'Art.31', 'Cooperation with the supervisory authority', 'The controller and the processor shall cooperate, on request, with the supervisory authority in the performance of its tasks.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 8),
('e3000000-0000-0000-0001-000000000009', 'e0000000-0000-0000-0000-000000000001', 'Art.32', 'Security of processing', 'The controller and processor shall implement appropriate technical and organisational measures to ensure a level of security appropriate to the risk.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 9),
('e3000000-0000-0000-0001-000000000010', 'e0000000-0000-0000-0000-000000000001', 'Art.33', 'Notification of a personal data breach to the supervisory authority', 'In the case of a personal data breach, the controller shall without undue delay notify the supervisory authority, where feasible within 72 hours.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 10),
('e3000000-0000-0000-0001-000000000011', 'e0000000-0000-0000-0000-000000000001', 'Art.34', 'Communication of a personal data breach to the data subject', 'When the personal data breach is likely to result in a high risk to the rights and freedoms of natural persons, the controller shall communicate the breach to the data subject without undue delay.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 11),
('e3000000-0000-0000-0001-000000000012', 'e0000000-0000-0000-0000-000000000001', 'Art.35', 'Data protection impact assessment', 'Where a type of processing is likely to result in a high risk to the rights and freedoms of natural persons, the controller shall carry out an assessment of the impact of the envisaged processing operations.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 12),
('e3000000-0000-0000-0001-000000000013', 'e0000000-0000-0000-0000-000000000001', 'Art.36', 'Prior consultation', 'The controller shall consult the supervisory authority prior to processing where a data protection impact assessment indicates that the processing would result in a high risk.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 13),
('e3000000-0000-0000-0001-000000000014', 'e0000000-0000-0000-0000-000000000001', 'Art.37', 'Designation of the data protection officer', 'The controller and processor shall designate a data protection officer in specified circumstances including public authorities, large-scale monitoring, or special categories of data.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 14),
('e3000000-0000-0000-0001-000000000015', 'e0000000-0000-0000-0000-000000000001', 'Art.38', 'Position of the data protection officer', 'The controller and processor shall ensure that the data protection officer is involved in all issues relating to the protection of personal data and provides resources and access.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 15),
('e3000000-0000-0000-0001-000000000016', 'e0000000-0000-0000-0000-000000000001', 'Art.39', 'Tasks of the data protection officer', 'The DPO shall inform and advise, monitor compliance, provide advice on DPIAs, cooperate with the supervisory authority, and act as contact point.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 16),
('e3000000-0000-0000-0001-000000000017', 'e0000000-0000-0000-0000-000000000001', 'Art.40', 'Codes of conduct', 'Member States, supervisory authorities, the Board and Commission shall encourage the drawing up of codes of conduct intended to contribute to proper application of GDPR.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 17),
('e3000000-0000-0000-0001-000000000018', 'e0000000-0000-0000-0000-000000000001', 'Art.41', 'Monitoring of approved codes of conduct', 'A body which has an appropriate level of expertise may be accredited by the competent supervisory authority to monitor compliance with a code of conduct.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 18),
('e3000000-0000-0000-0001-000000000019', 'e0000000-0000-0000-0000-000000000001', 'Art.42', 'Certification', 'Member States, supervisory authorities, the Board and Commission shall encourage the establishment of data protection certification mechanisms, seals, and marks.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 19),
('e3000000-0000-0000-0001-000000000020', 'e0000000-0000-0000-0000-000000000001', 'Art.43', 'Certification bodies', 'Certification bodies with appropriate level of expertise shall be accredited to issue and renew certification.', 'Controller and Processor', 'e3000000-0000-0000-0000-000000000001', 20);

-- ===========================================
-- CHAPTER V - TRANSFERS TO THIRD COUNTRIES (Articles 44-49)
-- ===========================================

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e4000000-0000-0000-0000-000000000001', 'e0000000-0000-0000-0000-000000000001', 'CH-V', 'Transfers of Personal Data to Third Countries', 'Requirements for transfers of personal data to third countries or international organisations.', 'International Transfers', NULL, 4);

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e4000000-0000-0000-0001-000000000001', 'e0000000-0000-0000-0000-000000000001', 'Art.44', 'General principle for transfers', 'Any transfer of personal data to a third country or international organisation shall take place only if the conditions laid down in this Chapter are complied with.', 'International Transfers', 'e4000000-0000-0000-0000-000000000001', 1),
('e4000000-0000-0000-0001-000000000002', 'e0000000-0000-0000-0000-000000000001', 'Art.45', 'Transfers on the basis of an adequacy decision', 'A transfer may take place where the Commission has decided that the third country ensures an adequate level of protection.', 'International Transfers', 'e4000000-0000-0000-0000-000000000001', 2),
('e4000000-0000-0000-0001-000000000003', 'e0000000-0000-0000-0000-000000000001', 'Art.46', 'Transfers subject to appropriate safeguards', 'In absence of an adequacy decision, transfers may occur only with appropriate safeguards such as binding corporate rules, standard contractual clauses, or approved codes of conduct.', 'International Transfers', 'e4000000-0000-0000-0000-000000000001', 3),
('e4000000-0000-0000-0001-000000000004', 'e0000000-0000-0000-0000-000000000001', 'Art.47', 'Binding corporate rules', 'Binding corporate rules shall be approved by the competent supervisory authority and meet specified requirements including being legally binding and enforceable.', 'International Transfers', 'e4000000-0000-0000-0000-000000000001', 4),
('e4000000-0000-0000-0001-000000000005', 'e0000000-0000-0000-0000-000000000001', 'Art.48', 'Transfers not authorised by Union law', 'Any judgment of a court or decision of an administrative authority of a third country requiring transfer shall only be recognised if based on an international agreement.', 'International Transfers', 'e4000000-0000-0000-0000-000000000001', 5),
('e4000000-0000-0000-0001-000000000006', 'e0000000-0000-0000-0000-000000000001', 'Art.49', 'Derogations for specific situations', 'In absence of adequacy decision or appropriate safeguards, transfers may occur only for specific situations such as explicit consent, contract performance, or compelling legitimate interests.', 'International Transfers', 'e4000000-0000-0000-0000-000000000001', 6);

-- ===========================================
-- CHAPTER VIII - REMEDIES, LIABILITY AND PENALTIES (Articles 77-84)
-- ===========================================

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e5000000-0000-0000-0000-000000000001', 'e0000000-0000-0000-0000-000000000001', 'CH-VIII', 'Remedies, Liability and Penalties', 'Rights to lodge complaints, judicial remedies, compensation, and administrative fines.', 'Enforcement', NULL, 5);

INSERT INTO framework_requirements (id, framework_id, code, name, description, category, parent_id, sort_order) VALUES
('e5000000-0000-0000-0001-000000000001', 'e0000000-0000-0000-0000-000000000001', 'Art.77', 'Right to lodge a complaint with a supervisory authority', 'Every data subject shall have the right to lodge a complaint with a supervisory authority if they consider that processing of their personal data infringes this Regulation.', 'Enforcement', 'e5000000-0000-0000-0000-000000000001', 1),
('e5000000-0000-0000-0001-000000000002', 'e0000000-0000-0000-0000-000000000001', 'Art.78', 'Right to an effective judicial remedy against a supervisory authority', 'Each natural or legal person shall have the right to an effective judicial remedy against a legally binding decision of a supervisory authority concerning them.', 'Enforcement', 'e5000000-0000-0000-0000-000000000001', 2),
('e5000000-0000-0000-0001-000000000003', 'e0000000-0000-0000-0000-000000000001', 'Art.79', 'Right to an effective judicial remedy against a controller or processor', 'Each data subject shall have the right to an effective judicial remedy where they consider that their rights under GDPR have been infringed as a result of processing.', 'Enforcement', 'e5000000-0000-0000-0000-000000000001', 3),
('e5000000-0000-0000-0001-000000000004', 'e0000000-0000-0000-0000-000000000001', 'Art.80', 'Representation of data subjects', 'The data subject shall have the right to mandate a not-for-profit body, organisation or association to lodge the complaint on their behalf and exercise rights.', 'Enforcement', 'e5000000-0000-0000-0000-000000000001', 4),
('e5000000-0000-0000-0001-000000000005', 'e0000000-0000-0000-0000-000000000001', 'Art.82', 'Right to compensation and liability', 'Any person who has suffered material or non-material damage as a result of an infringement of this Regulation shall have the right to receive compensation from the controller or processor.', 'Enforcement', 'e5000000-0000-0000-0000-000000000001', 5),
('e5000000-0000-0000-0001-000000000006', 'e0000000-0000-0000-0000-000000000001', 'Art.83', 'General conditions for imposing administrative fines', 'Supervisory authorities shall ensure that administrative fines are effective, proportionate, and dissuasive. Fines up to 20 million EUR or 4% of total worldwide annual turnover for the most serious infringements.', 'Enforcement', 'e5000000-0000-0000-0000-000000000001', 6),
('e5000000-0000-0000-0001-000000000007', 'e0000000-0000-0000-0000-000000000001', 'Art.84', 'Penalties', 'Member States shall lay down the rules on other penalties applicable to infringements of this Regulation, in particular for infringements not subject to administrative fines.', 'Enforcement', 'e5000000-0000-0000-0000-000000000001', 7);
